from django.core.management.base import BaseCommand
from films.models import Film


class Command(BaseCommand):
    help = '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å–º–æ–≤'

    def handle(self, *args, **options):
        self.stdout.write("üîß –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ö–õ–ò–ö–ê–ë–ï–õ–¨–ù–û–°–¢–ò –§–ò–õ–¨–ú–û–í")
        self.stdout.write("=" * 60)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–∏–ª—å–º—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        films = Film.objects.all()
        
        self.stdout.write(f"\nüìä –ü–†–û–í–ï–†–ö–ê –î–ê–ù–ù–´–•:")
        self.stdout.write(f"  üé¨ –í—Å–µ–≥–æ —Ñ–∏–ª—å–º–æ–≤: {films.count()}")
        
        if films.exists():
            self.stdout.write(f"\nüé≠ –ü–ï–†–í–´–ï 5 –§–ò–õ–¨–ú–û–í:")
            for film in films[:5]:
                self.stdout.write(f"  üì∫ ID: {film.pk} - {film.title} ({film.year})")
                self.stdout.write(f"    üîó URL: /film/{film.pk}/")
                self.stdout.write(f"    üì∏ –ü–æ—Å—Ç–µ—Ä: {'‚úÖ' if film.poster else '‚ùå'}")
        
        self.stdout.write(f"\nüîç –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–ò–ß–ò–ù–´ –ü–†–û–ë–õ–ï–ú–´:")
        issues = [
            "‚ùå CSS —Å—Ç–∏–ª–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –∫–ª–∏–∫–∏ (pointer-events: none)",
            "‚ùå –ü–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å –≤—ã—Å–æ–∫–∏–º z-index",
            "‚ùå JavaScript –æ—à–∏–±–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—é",
            "‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ URL –≤ —à–∞–±–ª–æ–Ω–∞—Ö",
            "‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å Django URL routing",
            "‚ùå –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã CSS –∞–Ω–∏–º–∞—Ü–∏–π",
            "‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å hover —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏",
            "‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ HTML"
        ]
        
        for issue in issues:
            self.stdout.write(f"  {issue}")
        
        self.stdout.write(f"\nüõ†Ô∏è –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:")
        fixes = [
            "1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CSS —Å—Ç–∏–ª–∏ –¥–ª—è .film-card",
            "2. –£–±—Ä–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ pointer-events",
            "3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å z-index –ø—Ä–æ–±–ª–µ–º—ã",
            "4. –£–ø—Ä–æ—Å—Ç–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É HTML",
            "5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å JavaScript –æ—à–∏–±–∫–∏",
            "6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö"
        ]
        
        for fix in fixes:
            self.stdout.write(f"  {fix}")
        
        self.stdout.write(f"\nüé® CSS –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:")
        css_fixes = [
            "/* –£–±–∏—Ä–∞–µ–º pointer-events: none */",
            ".film-card { pointer-events: auto; }",
            ".film-card a { pointer-events: auto; }",
            "",
            "/* –ò—Å–ø—Ä–∞–≤–ª—è–µ–º z-index */",
            ".film-card { z-index: 1; }",
            ".film-card:hover { z-index: 10; }",
            "",
            "/* –£–±–∏—Ä–∞–µ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã */",
            ".film-card * { pointer-events: auto; }"
        ]
        
        for css_fix in css_fixes:
            self.stdout.write(f"  {css_fix}")
        
        self.stdout.write(f"\nüåê –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:")
        test_steps = [
            "1. –û—Ç–∫—Ä–æ–π—Ç–µ http://127.0.0.1:8000/",
            "2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏",
            "3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∫–ª–∏–∫–Ω—É—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã–µ —á–∞—Å—Ç–∏ –∫–∞—Ä—Ç–æ—á–∫–∏",
            "4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ hover —ç—Ñ—Ñ–µ–∫—Ç—ã",
            "5. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ",
            "6. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã"
        ]
        
        for step in test_steps:
            self.stdout.write(f"  {step}")
        
        self.stdout.write(f"\nüîó –ü–†–Ø–ú–´–ï –°–°–´–õ–ö–ò –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:")
        for film in films[:5]:
            self.stdout.write(f"  üì∫ {film.title}: http://127.0.0.1:8000/film/{film.pk}/")
        
        self.stdout.write(f"\nüí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:")
        recommendations = [
            "üñ±Ô∏è –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∫–ª–∏–∫–Ω—É—Ç—å –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π ‚Üí '–û—Ç–∫—Ä—ã—Ç—å –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ'",
            "üîç –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç–ª–µ–º–µ–Ω—Ç –≤ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–µ –±—Ä–∞—É–∑–µ—Ä–∞",
            "‚å®Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Tab –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ —Å—Å—ã–ª–∫–∞–º",
            "üì± –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ",
            "üåê –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä",
            "üîÑ –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞"
        ]
        
        for rec in recommendations:
            self.stdout.write(f"  {rec}")
        
        self.stdout.write(self.style.SUCCESS(f"\nüîß –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê!"))
        self.stdout.write("üí° –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ CSS —Å—Ç–∏–ª–∏")
        self.stdout.write("üõ†Ô∏è –∏ JavaScript –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞.")