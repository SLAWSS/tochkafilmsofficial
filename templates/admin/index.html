{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrahead %}
    {{ block.super }}
    <style>
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(229, 9, 20, 0.2);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(229, 9, 20, 0.2);
            border-color: rgba(229, 9, 20, 0.4);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #e50914;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(229, 9, 20, 0.3);
        }
        
        .stat-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stat-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.7;
        }
        
        .welcome-message {
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(229, 9, 20, 0.2);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .welcome-title {
            font-size: 2rem;
            font-weight: 700;
            color: #e50914;
            margin-bottom: 15px;
            text-shadow: 0 2px 10px rgba(229, 9, 20, 0.3);
        }
        
        .welcome-subtitle {
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }
        
        .quick-action {
            background: rgba(229, 9, 20, 0.1);
            border: 1px solid rgba(229, 9, 20, 0.3);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
            text-decoration: none;
            color: #e50914;
            font-weight: 500;
        }
        
        .quick-action:hover {
            background: rgba(229, 9, 20, 0.2);
            transform: translateY(-2px);
            color: #fff;
            text-shadow: 0 0 10px rgba(229, 9, 20, 0.5);
        }
    </style>
{% endblock %}

{% block content %}
<div class="welcome-message">
    <div class="welcome-title">üé¨ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ TochkaFilms Admin</div>
    <div class="welcome-subtitle">
        –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –∫–∏–Ω–æ–ø–æ—Ä—Ç–∞–ª–æ–º<br>
        –£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Ñ–∏–ª—å–º–∞–º–∏, –∞–∫—Ç–µ—Ä–∞–º–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
    </div>
</div>

<div class="dashboard-stats">
    <div class="stat-card">
        <div class="stat-icon">üé¨</div>
        <div class="stat-number" id="films-count">143</div>
        <div class="stat-label">–§–∏–ª—å–º–æ–≤</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon">üé≠</div>
        <div class="stat-number" id="actors-count">6</div>
        <div class="stat-label">–ê–∫—Ç–µ—Ä–æ–≤</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon">üìÅ</div>
        <div class="stat-number" id="categories-count">16</div>
        <div class="stat-label">–ö–∞—Ç–µ–≥–æ—Ä–∏–π</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon">üë•</div>
        <div class="stat-number" id="users-count">2</div>
        <div class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
    </div>
</div>

<div class="quick-actions">
    <a href="{% url 'admin:films_film_add' %}" class="quick-action">
        ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å–º
    </a>
    <a href="{% url 'admin:films_actor_add' %}" class="quick-action">
        üé≠ –î–æ–±–∞–≤–∏—Ç—å –∞–∫—Ç–µ—Ä–∞
    </a>
    <a href="{% url 'admin:films_category_add' %}" class="quick-action">
        üìÅ –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
    </a>
    <a href="{% url 'admin:auth_user_changelist' %}" class="quick-action">
        üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
    </a>
</div>

{% if app_list %}
    {% for app in app_list %}
        <div class="app-{{ app.app_label }} module">
            <table>
                <caption>
                    <a href="{{ app.app_url }}" class="section" title="{% blocktrans with name=app.name %}Models in the {{ name }} application{% endblocktrans %}">{{ app.name }}</a>
                </caption>
                {% for model in app.models %}
                    <tr class="model-{{ model.object_name|lower }}">
                        {% if model.admin_url %}
                            <th scope="row"><a href="{{ model.admin_url }}">{{ model.name }}</a></th>
                        {% else %}
                            <th scope="row">{{ model.name }}</th>
                        {% endif %}

                        {% if model.add_url %}
                            <td><a href="{{ model.add_url }}" class="addlink">{% trans 'Add' %}</a></td>
                        {% else %}
                            <td>&nbsp;</td>
                        {% endif %}

                        {% if model.admin_url %}
                            {% if model.view_only %}
                                <td><a href="{{ model.admin_url }}" class="viewlink">{% trans 'View' %}</a></td>
                            {% else %}
                                <td><a href="{{ model.admin_url }}" class="changelink">{% trans 'Change' %}</a></td>
                            {% endif %}
                        {% else %}
                            <td>&nbsp;</td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </table>
        </div>
    {% endfor %}
{% else %}
    <p>{% trans "You don't have permission to view or edit anything." %}</p>
{% endif %}

<script>
// –ê–Ω–∏–º–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤
function animateCounter(element, target) {
    let current = 0;
    const increment = target / 50;
    const timer = setInterval(() => {
        current += increment;
        if (current >= target) {
            current = target;
            clearInterval(timer);
        }
        element.textContent = Math.floor(current);
    }, 30);
}

// –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
document.addEventListener('DOMContentLoaded', function() {
    const counters = [
        { element: document.getElementById('films-count'), target: 143 },
        { element: document.getElementById('actors-count'), target: 6 },
        { element: document.getElementById('categories-count'), target: 16 },
        { element: document.getElementById('users-count'), target: 2 }
    ];
    
    counters.forEach(counter => {
        if (counter.element) {
            animateCounter(counter.element, counter.target);
        }
    });
});
</script>
{% endblock %}
