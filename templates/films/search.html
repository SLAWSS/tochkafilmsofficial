{% extends 'films/base.html' %}

{% block title %}–ü–æ–∏—Å–∫ - TochkaFilms{% endblock %}

{% block content %}
<div class="container">
    <h1 class="cinematic-title">üîç –ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤</h1>
    
    <form method="get" class="search-form">
        <input type="text" name="q" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞..." value="{{ query }}" required>
        <button type="submit" class="btn">–ò—Å–∫–∞—Ç—å</button>
    </form>

    {% if query %}
        <div class="search-results-header">
            <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞: "{{ query }}"</h2>
            {% if films_count > 0 %}
                <p class="results-count">–ù–∞–π–¥–µ–Ω–æ: {{ films_count }} —Ñ–∏–ª—å–º{{ films_count|pluralize:"–æ–≤" }}</p>
            {% endif %}
        </div>
        
        {% if films %}
            <div class="film-grid">
                {% for film in films %}
                <div class="film-card">
                    {% if film.trailer_url %}
                        {% if 'vk.com' in film.trailer_url %}
                            <div class="russian-badge vk-badge">VK</div>
                        {% elif 'rutube.ru' in film.trailer_url %}
                            <div class="russian-badge rutube-badge">RuTube</div>
                        {% endif %}
                    {% endif %}
                    <a href="{% url 'films:film_detail' film.pk %}">
                        {% if film.poster %}
                            <img src="{{ film.poster.url }}" alt="{{ film.title }}">
                            {% if film.trailer_url %}
                                <div class="play-overlay"></div>
                            {% endif %}
                        {% else %}
                            <div class="no-poster">{{ film.title }}</div>
                        {% endif %}
                        <div class="film-info">
                            <h3>{{ film.title }}</h3>
                            <p>{{ film.year }} | <span class="rating-stars">‚≠ê {{ film.rating }}</span></p>
                            <div class="film-categories">
                                {% for category in film.categories.all %}
                                    <span class="category-tag">{{ category.name }}</span>
                                {% endfor %}
                            </div>
                        </div>
                    </a>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="no-results">
                <div class="no-results-icon">üîç</div>
                <h3>–ü–æ –∑–∞–ø—Ä–æ—Å—É "{{ query }}" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
                <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ:</p>
                <ul>
                    <li>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è</li>
                    <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –æ–±—â–∏–µ —Ç–µ—Ä–º–∏–Ω—ã</li>
                    <li>–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ –ø–æ –∂–∞–Ω—Ä—É (–±–æ–µ–≤–∏–∫, –∫–æ–º–µ–¥–∏—è, –¥—Ä–∞–º–∞ –∏ —Ç.–¥.)</li>
                </ul>
                <div class="search-suggestions">
                    <p><strong>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–∏–ª—å–º—ã:</strong></p>
                    <a href="{% url 'films:search' %}?q=–∫—Ä–∏–∫" class="suggestion-link">–ö—Ä–∏–∫</a>
                    <a href="{% url 'films:search' %}?q=–º–∞—Ç—Ä–∏—Ü–∞" class="suggestion-link">–ú–∞—Ç—Ä–∏—Ü–∞</a>
                    <a href="{% url 'films:search' %}?q=–¥–∂–æ–∫–µ—Ä" class="suggestion-link">–î–∂–æ–∫–µ—Ä</a>
                    <a href="{% url 'films:search' %}?q=–¥—é–Ω–∞" class="suggestion-link">–î—é–Ω–∞</a>
                </div>
            </div>
        {% endif %}
    {% else %}
        <div class="search-help">
            <h2>üîç –ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤</h2>
            <p>–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞, –æ–ø–∏—Å–∞–Ω–∏–µ –∏–ª–∏ –∂–∞–Ω—Ä –¥–ª—è –ø–æ–∏—Å–∫–∞</p>
            <div class="search-examples">
                <p><strong>–ü—Ä–∏–º–µ—Ä—ã –ø–æ–∏—Å–∫–∞:</strong></p>
                <a href="{% url 'films:search' %}?q=–±–æ–µ–≤–∏–∫" class="example-link">–±–æ–µ–≤–∏–∫</a>
                <a href="{% url 'films:search' %}?q=2023" class="example-link">2023</a>
                <a href="{% url 'films:search' %}?q=—É–∂–∞—Å—ã" class="example-link">—É–∂–∞—Å—ã</a>
                <a href="{% url 'films:search' %}?q=–∫–æ–º–µ–¥–∏—è" class="example-link">–∫–æ–º–µ–¥–∏—è</a>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}
