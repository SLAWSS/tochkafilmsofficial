{% extends 'films/base.html' %}
{% load static %}

{% block title %}–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è - TochkaFilms{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1 class="cinematic-title">üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h1>
    </div>

    {% if page_obj %}
        <div class="results-info">
            <p class="readable-text">–í—Å–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π: <span class="stats-number">{{ page_obj.paginator.count }}</span></p>
        </div>

        <div class="notifications-list">
            {% for notification in page_obj %}
            <div class="notification-item {% if not notification.is_read %}notification-unread{% endif %}">
                <div class="notification-icon">
                    {% if notification.type == 'new_film' %}
                        üé¨
                    {% elif notification.type == 'new_review' %}
                        ‚≠ê
                    {% elif notification.type == 'recommendation' %}
                        üí°
                    {% else %}
                        üîî
                    {% endif %}
                </div>
                <div class="notification-info">
                    <h3>{{ notification.title }}</h3>
                    <p class="notification-message">{{ notification.message }}</p>
                    <div class="notification-date">
                        {{ notification.created_at|date:"d.m.Y H:i" }}
                    </div>
                </div>
                <div class="notification-actions">
                    {% if notification.film %}
                        <a href="{% url 'films:film_detail' notification.film.pk %}" class="btn btn-small">
                            –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–∏–ª—å–º
                        </a>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
        {% if page_obj.has_other_pages %}
        <div class="pagination">
            {% if page_obj.has_previous %}
                <a href="?page=1">&laquo; –ü–µ—Ä–≤–∞—è</a>
                <a href="?page={{ page_obj.previous_page_number }}">–ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
            {% endif %}
            
            <span class="current-page">
                –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}
            </span>
            
            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}">–°–ª–µ–¥—É—é—â–∞—è</a>
                <a href="?page={{ page_obj.paginator.num_pages }}">–ü–æ—Å–ª–µ–¥–Ω—è—è &raquo;</a>
            {% endif %}
        </div>
        {% endif %}

    {% else %}
        <div class="empty-state">
            <div class="empty-icon">üîî</div>
            <h2>–ù–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h2>
            <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–∞–π—Ç–æ–º!</p>
            <a href="{% url 'films:home' %}" class="btn">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
        </div>
    {% endif %}
</div>
{% endblock %}